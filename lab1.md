#### Lab1报告

阅读老师提供的v9-cpu文件夹中包含的os0.c代码，分析lab0.c的设计实现过程如下：

首先设置计数器current为0，通过TIME指令将时钟到时值timeout设为1000，并通过IVEC指令设置中断向量的起始地址为函数*alltraps()*的入口地址。中断处理函数*alltraps()*通过将寄存器A、B的值压栈来保存现场，同时将current计数器加一，然后恢复现场，通过RTI指令从中断返回。

主函数中使用while循环，来交替地输出字符1或者0，显示当前current计数器的值是奇数还是偶数。具体向屏幕输出字符的操作由BOUT指令完成。

每经历过1000个时钟周期，计时器timer会超时，触发时钟中断，从而通过中断向量进入中断处理程序更新计数器current的值。若while循环保持不变，则其输出1或0字符的个数不仅仅取决于*stmr()*函数传入的参数，还取决于*v9-cpu/root/bin/em.c*中定义的指令执行周期计数：

	cycle = delta = 4096;
	xcycle = delta * 4;
	
即一条指令执行占用4096个时钟周期。delta的值越小，则两次时钟中断间执行的指令会越多，则while循环执行的轮数也会越多。另一方面，如果timeout的值越大，则两次时钟中断间隔越久，则while循环执行的轮数也会越多。